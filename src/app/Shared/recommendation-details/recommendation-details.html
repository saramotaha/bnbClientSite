<div class="dialog-container">
  <div class="dialog-header">
    <h2 mat-dialog-title>Your Recommendations</h2>
    <button mat-icon-button mat-dialog-close aria-label="Close recommendations">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <mat-dialog-content>
    <div class="recommendation-content">
      <!-- Error State -->
      <div *ngIf="error" class="error-state">
        <mat-icon>error</mat-icon>
        <h3>Error Loading Recommendations</h3>
        <p>{{ error }}</p>
        <button mat-raised-button color="warn" (click)="refreshRecommendations()">
          Try Again
        </button>
      </div>

      <!-- No Recommendations State -->
      <!-- <div *ngIf="!error && recommendations.length === 0" class="no-recommendations-state">
        <mat-icon>info</mat-icon>
        <h3>No Recommendations Available</h3>
        <p>To get personalized recommendations:</p>
        <ol>
          <li>Complete your profile preferences</li>
          <li>Make your first booking</li>
          <li>Rate properties you've stayed at</li>
        </ol>
        <button mat-raised-button color="primary" (click)="navigateToProfileInfo()">
          Complete Profile Now
        </button>
      </div> -->

      <!-- Recommendations List -->
      <div *ngIf="!error && recommendations.length > 0" class="recommendations-list">
        <mat-card *ngFor="let rec of recommendations" class="recommendation-card" 
                  (click)="navigateToProperty(rec.property.id)">
          <img mat-card-image [src]="rec.property.images[0]?.imageUrl || 'assets/images/default-property.jpg'" 
               alt="{{ rec.property.title }}">
          <mat-card-content>
            <h3>{{ rec.property.title }}</h3>
            <div class="property-details">
              <span><mat-icon>location_on</mat-icon> {{ rec.property.city }}, {{ rec.property.country }}</span>
              <span><mat-icon>attach_money</mat-icon> {{ rec.property.pricePerNight | currency }} per night</span>
              <span><mat-icon>star</mat-icon> {{ rec.matchPercentage }}% match</span>
            </div>
          </mat-card-content>
        </mat-card>
      </div>


      <div *ngIf=" recommendations.length == 0" class="recommendations-list">
        <mat-card *ngFor="let rec of recommendedData" class="recommendation-card" 
                  (click)="navigateToProperty(rec.id)">
          <!-- <img mat-card-image [src]="rec.property.images[0]?.imageUrl || 'assets/images/default-property.jpg'"  -->
               <!-- alt="{{ rec.property.title }}"> -->
          <mat-card-content>
            <h3>{{ rec.propertyType }}</h3>
            <div class="property-details">
              <span><mat-icon>location_on</mat-icon> {{ rec.city }}</span>
              <span><mat-icon>attach_money</mat-icon> {{ rec.pricePerNight | currency }} per night</span>
              <span><mat-icon>star</mat-icon> {{ rec.reason }}reason</span>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button color="primary" (click)="refreshRecommendations()">
      <mat-icon>refresh</mat-icon>
      Refresh
    </button>
  </mat-dialog-actions>
</div>